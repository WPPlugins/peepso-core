!function(a,b,c){var d=c(a,b);ps_member=new d}(window,jQuery,function(a,b){function c(){}return c.prototype.block_user=function(c,d){this.blocking_user||(d&&(d=b(d),d.find("img").css("display","inline")),this.blocking_user=!0,peepso.postJson("activity.blockuser",{uid:peepsodata.currentuserid,user_id:c},b.proxy(function(d){this.blocking_user=!1,d.success&&(b(".ps-js-focus--"+c).find(".ps-focus-actions, .ps-focus-actions-mobile").html(d.data.actions),ps_observer.apply_filters("ps_member_user_blocked",c,d.data),psmessage.show(d.data.header,d.data.message,psmessage.fade_time),d.data.redirect&&setTimeout(function(){a.location=d.data.redirect},Math.min(1e3,psmessage.fade_time)))},this)))},c.prototype.unblock_user=function(a,c){this.unblocking_user||(c&&(c=b(c),c.find("img").css("display","inline")),this.unblocking_user=!0,peepso.postJson("activity.unblockuser",{uid:peepsodata.currentuserid,user_id:a},b.proxy(function(b){this.unblocking_user=!1,b.success&&(jQuery(".ps-js-focus--"+a).find(".ps-focus-actions, .ps-focus-actions-mobile").html(b.data.actions),ps_observer.apply_filters("ps_member_user_unblocked",a,b.data),psmessage.show(b.data.header,b.data.message,psmessage.fade_time))},this)))},c.prototype.ban_user=function(a,c){if(!this.banning_user){c&&(c=b(c),c.find("img").css("display","inline"));var d=peepsomemberdata.ban_popup_title,e=peepsomemberdata.ban_popup_content,f=['<button type="button" class="ps-btn ps-btn-small ps-button-cancel" onclick="return pswindow.do_no_confirm();">',peepsomemberdata.ban_popup_cancel,"</button>",'<button type="button" class="ps-btn ps-btn-small ps-button-action" onclick="return ps_member.do_ban_user('+a+');">',peepsomemberdata.ban_popup_save,"</button>"].join(" "),g=pswindow.show(d,e).set_actions(f),h=g.$container;h.find("#ban-forever").on("focus",function(){b("#ban-period-empty").hide()}),ps_datepicker.init(h.find("[name=ban_period_date]"))}},c.prototype.do_ban_user=function(c){var d,e=b("#form_ban_user"),f=e.find("input[name=ban_type]:checked").val();if("ban_period"===f&&(d=e.find("input[name=ban_period_date]").data("value"),!d))return e.find("#ban-period-empty").show(),!1;var g={user_id:c,ban_status:1,ban_type:f,ban_period_date:d};this.banning_user=!0,peepso.postJson("activity.set_ban_status",g,b.proxy(function(b){this.banning_user=!1,b.success&&(ps_observer.apply_filters("ps_member_user_banned",c,b.data),psmessage.show(b.data.header,b.data.message,psmessage.fade_time),setTimeout(function(){a.location.reload()},Math.min(1e3,psmessage.fade_time)))},this))},c.prototype.unban_user=function(c,d){this.unbanning_user||(d&&(d=b(d),d.find("img").css("display","inline")),this.unbanning_user=!0,peepso.postJson("activity.set_ban_status",{user_id:c,ban_status:0},b.proxy(function(b){this.unbanning_user=!1,b.success&&(ps_observer.apply_filters("ps_member_user_unbanned",c,b.data),psmessage.show(b.data.header,b.data.message,psmessage.fade_time),setTimeout(function(){a.location.reload()},Math.min(1e3,psmessage.fade_time)))},this)))},c});