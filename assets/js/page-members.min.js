!function(a,b){var c=function(a){function b(){b.super_.apply(this,arguments),a(a.proxy(this.init_page,this))}return peepso.npm.inherits(b,PsPageAutoload),peepso.npm.objectAssign(b.prototype,{init_page:function(){this._search_$query=a(".ps-js-members-query").on("input",a.proxy(this._filter,this)),this._search_$gender=a(".ps-js-members-gender").on("change",a.proxy(this._filter,this)),this._search_$sortby=a(".ps-js-members-sortby").on("change",a.proxy(this._filter,this)),this._search_$avatar=a(".ps-js-members-avatar").on("click",a.proxy(this._filter,this)),a(".ps-form-search-opt").on("click",a.proxy(this._toggle,this)),this._filter()},_search_url:"membersearch.search",_search_params:{uid:peepsodata.currentuserid,user_id:peepsodata.userid,query:void 0,order_by:void 0,order:void 0,peepso_gender:void 0,peepso_avatar:void 0,limit:2,page:1},_search_render_html:function(a){return a.members&&a.members.length?a.members.join(""):""},_search_get_items:function(){return this._search_$ct.children(".ps-members-item-wrapper")},_fetch:function(b){return a.Deferred(a.proxy(function(c){b=a.extend({},b),_.isUndefined(b.limit)||(b.limit*=2),this._fetch_xhr&&this._fetch_xhr.abort(),this._fetch_xhr=peepso.disableAuth().disableError().getJson(this._search_url,b,a.proxy(function(a){a.success?c.resolveWith(this,[a.data]):c.rejectWith(this,[a.errors])},this))},this))},_filter:function(){var b=a.trim(this._search_$query.val()),c=this._search_$sortby.val().split("|"),d=this._search_$gender.val(),e=this._search_$avatar[0].checked?1:0;this._fetch_xhr&&this._fetch_xhr.abort(),this._search_params.query=b||void 0,this._search_params.order_by=c[0]||void 0,this._search_params.order=c[1]||void 0,this._search_params.peepso_gender=d||void 0,this._search_params.peepso_avatar=e||void 0,this._search_params.page=1,this._search()},_toggle:function(){a(".ps-js-page-filters").stop().slideToggle()}}),b}(a);new c(".ps-js-members")}(jQuery);