!function(a){function b(){function b(){$PeepSo.postJson("adminConfigLicense.check_license",{plugins:d},function(b){var d,e,f,g;if(b.success){d=b.data&&b.data.valid||{},e=b.data&&b.data.details||{};for(f in d)+d[f]?(g='<i class="ace-icon fa fa-check bigger-110" style="color:green"></i>',a("#error_"+f).hide()):(g='<i class="ace-icon fa fa-times bigger-110" style="color:red"></i>',a("#error_"+f).show()),e[f]&&(g=g+'<p class="peepso_license_details" style="clear:both;font-size:9px">'+e[f].diff+"</p>"),c.filter("#"+f).html(g)}})}var c=a(".license_status_check"),d={};c.length&&(c.each(function(){var b=a(this);d[b.attr("id")]=b.data("plugin-name")}),b(),setInterval(function(){b()},3e4))}function c(){var b=a("input[type=text].validate");b.off("keyup.validate").on("keyup.validate",function(){var b=a(this);d(b,b.data())}).trigger("keyup")}function d(a,b){clearTimeout(q),q=setTimeout(function(){"int"===b.ruleType?f(a,b):"email"===b.ruleType?g(a,b):e(a,b)},300)}function e(a,b){var c=a.val(),d=a.attr("name");b.ruleMinLength=+b.ruleMinLength,b.ruleMaxLength=+b.ruleMaxLength,b.ruleMinLength&&c.length<b.ruleMinLength?(h(a,b),p[d]=!0):b.ruleMaxLength&&c.length>b.ruleMaxLength?(h(a,b),p[d]=!0):(i(a,b),p[d]=!1,delete p[d]),j()}function f(a,b){var c=+a.val(),d=a.attr("name");b.ruleMin=+b.ruleMin,b.ruleMax=+b.ruleMax,b.ruleMin&&c<b.ruleMin?(h(a,b),p[d]=!0):b.ruleMax&&c>b.ruleMax?(h(a,b),p[d]=!0):(i(a,b),p[d]=!1,delete p[d]),j()}function g(a,b){var c=a.val(),d=/^([*+!.&#$Â¦\'\\%\/0-9a-z^_`{}=?~:-]+)@(([0-9a-z-]+\.)+[0-9a-z]{2,15})$/i;d.test(c)?(i(a,b),p[name]=!1,delete p[name]):(h(a,b),p[name]=!0),j()}function h(b,c){var d;b.hasClass("error")||(c.ruleMessage&&(d=b.next(".validate-error"),d.length||(d=a(['<div class="validate-error tooltip bottom">','<div class="tooltip-arrow"></div>','<div class="tooltip-inner">',c.ruleMessage,"</div></div>"].join("")),d.insertAfter(b))),b.addClass("error"))}function i(a,b){a.hasClass("error")&&a.removeClass("error")}function j(){clearTimeout(r),r=setTimeout(k,300)}function k(){var b,c=!1;for(b in p)if(p[b]){c=!0;break}var d=a("#peepso button[type=submit]");c?d.attr("disabled","disabled"):d.removeAttr("disabled")}function l(){clearTimeout(s),s=setTimeout(m,300)}function m(){a("#edit_warning").show()}function n(b){a(".img-landing-page-preview").attr("src",b).show(),a(".btn-lp-img-remove").show(),a(".default-img-selected").hide(),a("#landing_page_image").val(b)}function o(){a("#landing_page_image").val(""),a(".img-landing-page-preview").attr("src",a("#landing_page_image_default").val()),a(".btn-lp-img-remove").hide(),a(".default-img-selected").show()}a(document).ready(function(){var c=500,d=a("input[name='site_reporting_enable']");d.size()>0&&d.on("change",function(){a(this).is(":checked")?a("#field_site_reporting_types").fadeIn():a("#field_site_reporting_types").fadeOut()}).trigger("change");var e=a("input[name='site_registration_recaptcha_enable']");e.size()>0&&e.on("change",function(){a(this).is(":checked")?(a("#field_site_registration_recaptcha_sitekey").fadeIn(c),a("#field_site_registration_recaptcha_secretkey").fadeIn(c),a("#field_site_registration_recaptcha_description").fadeIn(c)):(a("#field_site_registration_recaptcha_sitekey").fadeOut(c),a("#field_site_registration_recaptcha_secretkey").fadeOut(c),a("#field_site_registration_recaptcha_description").fadeOut(c))}).trigger("change");var f=a("input[name='site_registration_enableterms']");f.size()>0&&f.on("change",function(){a(this).is(":checked")?a("#field_site_registration_terms").fadeIn(c):a("#field_site_registration_terms").fadeOut(c)}).trigger("change");var g=a("input[name='site_activity_limit_comments']");g.size()>0&&g.on("change",function(){a(this).is(":checked")?a("#field_site_activity_comments_allowed").fadeIn(c):a("#field_site_activity_comments_allowed").fadeOut(c)}).trigger("change");var h=a("input[name='avatars_wordpress_only']");h.size()>0&&h.on("change",function(){a(this).is(":checked")?(a("#field_avatars_peepso_only").fadeOut(c),a("#field_avatars_peepso_gravatar").fadeOut(c),a("#field_avatars_wordpress_only_desc").fadeIn(c)):(a("#field_avatars_peepso_only").fadeIn(c),a("#field_avatars_peepso_gravatar").fadeIn(c),a("#field_avatars_wordpress_only_desc").fadeOut(c))}).trigger("change"),b();var i=a("#reset-check");if(i.length){var j=a("#reset-do");i.on("click",function(){this.checked?j.removeAttr("disabled"):j.attr("disabled","disabled")}),j.on("click",function(a){a.preventDefault(),a.stopPropagation();var b=window.location.href;b=b.replace("&reset=1",""),window.location=b+"&reset=1"})}var k=window.location.href;if(k.indexOf("page=peepso_config")>-1){var l=a("#toplevel_page_peepso li.current ul.wp-submenu-wrap"),m=0;k.indexOf("tab=appearance")>-1?m=1:k.indexOf("tab=email")>-1?m=2:k.indexOf("tab=advanced")>-1&&(m=3),l.find("a").eq(m).parent().siblings().find("a").css({color:"rgba(240,245,250,.7)",fontWeight:"normal"}).on("mouseenter",function(){a(this).css({color:"#00b9eb"})}).on("mouseleave",function(){a(this).css({color:"rgba(240,245,250,.7)"})})}});var p={},q=!1,r=!1,s=!1;a(function(){c(),a("#peepso button[type=reset]").on("click",function(){setTimeout(c,100),setTimeout(function(){a("#edit_warning").hide()},1e3)}),setTimeout(function(){a("#peepso").find("input[type=text], textarea").on("keyup",function(){l()}),a("#peepso").find("input[type=checkbox], select").on("change",function(){l()})},1e3)}),a(document).ready(function(){function b(b){a(".img-og-preview").attr("src",b).show(),a(".btn-img-remove").show(),a(".no-img-selected").hide(),a("#opengraph_image").val(b)}function c(){a("#opengraph_image").val(""),a(".img-og-preview").attr("src",""),a(".img-og-preview, .btn-img-remove").hide(),a(".no-img-selected").show()}a(".inline-select").length>0&&a(".inline-select").on("click",function(b){a(this).closest("ul").find("a").removeClass("btn-primary"),a(this).closest(".form-group").find('input[type="hidden"]').val(a(this).attr("data-value")),a(this).addClass("btn-primary"),b.preventDefault()});var d=500,e=a("input[name='opengraph_enable']");e.size()>0&&(e.on("change",function(){$selector=a(this).closest(".inside").find('[id*="field_"]').not("#field_opengraph_enable"),a(this).is(":checked")?$selector.fadeIn(d):$selector.fadeOut(d)}).trigger("change"),a("#opengraph_title").after("<p class='text-right'><span class='opengraph_title_counter'></span> Characters</p><p>Depending on where the links will be shared, the title can be cropped to even 40 characters. Keep the title short and to the point.</p>"),a(".opengraph_title_counter").html(a("#opengraph_title").val().length),a("#opengraph_title").on("keyup",function(b){a(".opengraph_title_counter").html(a("#opengraph_title").val().length)}),a("#opengraph_description").after("<p class='text-right'><span class='opengraph_description_counter'></span> Characters</p><p>Depending on where the links will be shared, the description can be cropped to even 200 characters. Keep the description short and to the point.</p>"),a(".opengraph_description_counter").html(a("#opengraph_description").val().length),a("#opengraph_description").on("keyup",function(b){a(".opengraph_description_counter").html(a("#opengraph_description").val().length)})),$og_image_prop='<a class="btn btn-sm btn-info btn-img-og" href="#">Select Image</a> <a class="btn btn-sm btn-danger btn-img-remove" href="#">Remove Image</a><span class="no-img-selected">No image selected</span><img class="img-responsive img-og-preview" src="" />',a("#opengraph_image").after($og_image_prop).hide(),""!=a("#opengraph_image").val()?b(a("#opengraph_image").val()):c(),a(".btn-img-og").on("click",function(c){var d=a(this);wp.media.editor.send.attachment=function(a,c){var d=c.url;b(d)},wp.media.editor.open(d)}),a(".btn-img-remove").on("click",function(a){c(),a.preventDefault()})}),$lp_image_prop='<a class="btn btn-sm btn-info btn-img-landing-page" href="#">Select Image</a> <a class="btn btn-sm btn-danger btn-lp-img-remove" href="#">Remove Image</a><span class="default-img-selected">Default image selected</span><img class="img-responsive img-landing-page-preview" src="" />',a("#landing_page_image").after($lp_image_prop).hide(),a("#landing_page_image_default").hide(),""!=a("#landing_page_image").val()?n(a("#landing_page_image").val()):o(),a(".btn-img-landing-page").on("click",function(b){var c=a(this);wp.media.editor.send.attachment=function(a,b){var c=b.url;n(c)},wp.media.editor.open(c)}),a(".btn-lp-img-remove").on("click",function(a){o(),a.preventDefault()}),a(".notice.is-dismissible.peepso-new-plugin").on("click",".notice-dismiss",function(){a.post(ajaxurl,{action:"dismiss_new_plugin_notice"})})}(jQuery);